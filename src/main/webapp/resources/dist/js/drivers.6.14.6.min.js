(function(){var msgRequired='Ingrese un valor';var msgSelect='Seleccione un opci&oacute;n';var msgNumber='Solo ingresar n&uacute;meros';var msgMax15='M&aacuteximo 15 caracteres';var msgEmail='Ingresa un email v&aacute;lido';var validateDriver=$("#form-driver").validate({ignore:".ignore",rules:{"driverLicense":{required:true},"expirationDateLicense":{required:true},"gender":{required:true},"status":{required:true},"firstName":{required:true},"fathersLastName":{required:true},"mobile":{maxlength:15},"phoneHome":{maxlength:15},"phoneOffice":{maxlength:15},"email":{required:true,email:true},"addressLine1":{required:true},"idHomeEstate":{required:true},"idHomeCityCatalog":{required:true},"idWorkState":{required:true},"idWorkCityCatalog":{required:true},"username":{required:true,minlength:6,maxlength:15},"password":{required:true,minlength:6,maxlength:15},"repeatPassword":{required:true,minlength:6,maxlength:15},"deviceImei":{required:true},"deviceMark":{required:true},"deviceModel":{required:true},"deviceSerial":{required:true},"devicePhone":{required:true,maxlength:15}},messages:{"driverLicense":{required:msgRequired},"expirationDateLicense":{required:msgRequired},"gender":{required:msgRequired},"status":{required:msgRequired},"firstName":{required:msgRequired},"fathersLastName":{required:msgRequired},"mobile":{maxlength:msgMax15},"phoneHome":{maxlength:msgMax15},"phoneOffice":{maxlength:msgMax15},"email":{required:msgRequired,email:msgEmail},"addressLine1":{required:msgRequired},"idHomeEstate":{required:msgRequired},"idHomeCityCatalog":{required:msgRequired},"idWorkState":{required:msgRequired},"idWorkCityCatalog":{required:msgRequired},"username":{required:msgRequired,minlength:"M&iacute;nimo (06) caracteres",maxlength:msgMax15},"password":{required:msgRequired,minlength:"M&iacute;nimo (06) caracteres",maxlength:msgMax15},"repeatPassword":{required:msgRequired,minlength:"M&iacute;nimo (06) caracteres",maxlength:msgMax15},"deviceImei":{required:msgRequired},"deviceMark":{required:msgRequired},"deviceModel":{required:msgRequired},"deviceSerial":{required:msgRequired},"devicePhone":{required:msgRequired,maxlength:msgMax15}}});var validateTaxi=$("#form-taxi-driver").validate({rules:{"vehiclePlate":{required:true},"idTaxiCorp":{required:true},"idBrand":{required:true},"idModel":{required:true},"idColor":{required:true},"year":{required:true},"idCarType":{required:true},"idTaxiService":{required:true},"ownerFirstName":{required:true},"ownerFathersLastName":{required:true},"ownerDirectionLine1":{required:true}},messages:{"vehiclePlate":{required:msgRequired},"idTaxiCorp":{required:msgRequired},"idBrand":{required:msgRequired},"idModel":{required:msgRequired},"idColor":{required:msgRequired},"year":{required:msgRequired},"idCarType":{required:msgRequired},"idTaxiService":{required:msgRequired},"ownerFirstName":{required:msgRequired},"ownerFathersLastName":{required:msgRequired},"ownerDirectionLine1":{required:msgRequired}}});var isJpg=function(name){return name.match(/jpg$/i)};var isPng=function(name){return name.match(/png$/i)};$(document).ready(function(){$('#idPackage').on('change',function(){var value=$(this).val();var values=new Array();var value=value.split("-");var amount=value[1];var id=value[0];$('#package-cost').val(amount);$('#form-idPakage').val(id);$('#form-idDriver-package').val($('#idDriver').val());$('#form-cost-package').val(amount);});$('#form-buy-package').on('submit',function(e){e.preventDefault();e.stopPropagation();$.ajax({type:'POST',url:$('#form-buy-package').attr('action'),data:$('#form-buy-package').serialize(),success:function(response){var result=parseInt(response.responseCode);if(result===400){var strTitle='';var strText='';var strType='error';var errorCode=parseInt(response.errorCode);switch(errorCode){case 2601:strTitle='Valores requeridos';strText='C&oacute;digo de seguridad debe ser n&uacute;merico de tres digitos';break;case 2602:strTitle='Transacci&oacute;n rechazada';strText='Transacci&oacute;n fue rechazada por el banco';break;case 2603:strTitle='Valores requeridos';strText='Todos los parametros son Requeridos';break;case 2401:strTitle='Conductor';strText='Conductor no existe';break;case 2604:strTitle='Paquete';strText='Paquete no existe';break;case 2605:strTitle='Costo menor';strText='El Costo es menor al  totalAmount definido por el Paquete';break;case 1000:strTitle='Valores requeridos';strText='Todos los valores son requeridos';break;default:strTitle='Error inesperado';strText='Ocurrio error ['+errorCode+'] en la compra del Paquete';break;}
new PNotify({title:strTitle,text:strText,type:strType,hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{$('#modal-buy-package').modal('hide');$('#idPackage').val(0);new PNotify({title:'Recarga exitosa',text:'La Recarga del paquete fue registrada con &eacute;xito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});$('#idPackage').val(0);}}});});});$(document).ready(function(){var file=$('[name="file"]');var imgContainer=$('#imgContainer');$('#btnUpload').on('click',function(){var filename=$.trim(file.val());if(!(isJpg(filename)||isPng(filename))){alert('Debe seleccionar un tipo de archivo JPG/PNG');return;}
var formData=new FormData();formData.append('file',$('input[type=file]')[0].files[0]);$.ajax({url:'/echofile',type:"POST",data:formData,enctype:'multipart/form-data',processData:false,contentType:false}).done(function(data){$('#driver-photo-temp').attr('src','data:'+data.contenttype+';base64,'+data.base64);$('#driver-photo').attr('src',data.files);$('#photoUrl').val(data.files);$('#modal-upload-photo').modal('hide');}).fail(function(jqXHR,textStatus){alert('File upload failed ...'+jqXHR+' - '+textStatus);});});$('#btnClear').on('click',function(){file.val('');});});$(document).ready(function(){$('#equalsValues').on('change',function(){if($(this).is(":checked")){$('#ownerFirstName').val($('#first-name-driver').val());$('#ownerMiddleName').val($('#middle-name-driver').val());$('#ownerFathersLastName').val($('#father-last-name-driver').val());$('#ownerMotherLastName').val($('#mother-last-name-driver').val());$('#ownerDirectionLine1').val($('#addressLine1').val());$('#ownerDirectionLine2').val($('#addressLine2').val());}else{$('#ownerFirstName').val('');$('#ownerMiddleName').val('');$('#ownerFathersLastName').val('');$('#ownerMotherLastName').val('');$('#ownerDirectionLine1').val('');$('#ownerDirectionLine2').val('');}});$('#gender-male').prop('checked',true).val(1).click();$('#gender-female').prop('checked',false).val(0);$('#mobile-phone').mask('+000-0-0000000');$('#home-phone').mask('+000-0-0000000');$('#office-phone').mask('+000-0-0000000');$('#devicePhone').mask('+000-0-0000000');$('#driverPassword').mask('AAAAAAAAAAAAAAA',{'translation':{A:{pattern:/[A-Za-z0-9]/}}});$('#repeatPassword').mask('AAAAAAAAAAAAAAA',{'translation':{A:{pattern:/[A-Za-z0-9]/}}});$('#link-upload-photo').on('click',function(e){e.preventDefault();e.stopPropagation();$('#modal-upload-photo').modal({show:true});});$('#expirationDate').datetimepicker({startDate:'+1d',weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0});$('#btn-driver-buy').hide();$('#form-taxi-driver').parent().parent().hide();$('#idHomeEstate').on('change',function(){var value=$(this).val();var country=$('#idHomeContry').val();var url="/city/"+country+"/"+value;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var i=0;var options="";while(i<data.length){options+="<option value='"+data[i].idCity+"'>"+data[i].cityName+"</option>";i++;}
$('#idHomeCityCatalog').html('<option value="0" disabled selected="selected">Seleccione Ciudad</option>');$('#idHomeCityCatalog').append(options);$('#idHomeCityCatalog').val($('#idHomeCity').val());},type:'GET'});});$('#idWorkState').on('change',function(){var value=$(this).val();var country=$('#idWorkContry').val();var url="/city/"+country+"/"+value;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var i=0;var options="";while(i<data.length){options+="<option value='"+data[i].idCity+"'>"+data[i].cityName+"</option>";i++;}
$('#idWorkCityCatalog').html('<option  value="0" disabled selected="selected">Seleccione Ciudad</option>');$('#idWorkCityCatalog').append(options);$('#idWorkCityCatalog').val($('#idWorkCity').val());},type:'GET'});});$('#idBrand').on('change',function(){var value=$(this).val();var url="/models/"+value;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var i=0;var options="";while(i<data.length){options+="<option value='"+data[i].idModel+"'>"+data[i].brandModel+"</option>";i++;}
$('#idModel').html('<option  value="0" selected="selected">Seleccione</option>');$('#idModel').append(options);$('#idModel').val($('#idModelList').val());},type:'GET'});});$('#btn-query-driver').on('click',function(e){e.preventDefault();e.stopPropagation();var data=$('#driverLicense').val();var url="/driver/";if(data===''||data===undefined){new PNotify({title:'Valor requerido',text:'El numero de licencia es requerido',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});return false;}
url+=data;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var code=parseInt(data.responseCode);switch(code){case 200:$('#expirationDateLicense').val(data.responseData.driver.dExpirationDateLicense);$('#status').val(data.responseData.driver.dStatus);if(data.responseData.driver.photoUrl.match(/jpg$/i)||data.responseData.driver.photoUrl.match(/png$/i)){$('#driver-photo').attr('src',data.responseData.driver.photoUrl);$('#photoUrl').val(data.responseData.driver.photoUrl);}else{$('#driver-photo').attr('src','resources/images/profile_pic.jpg');$('#photoUrl').val('resources/images/profile_pic.jpg');}
$('#first-name-driver').val(data.responseData.driver.firstName);$('#middle-name-driver').val(data.responseData.driver.middleName);$('#father-last-name-driver').val(data.responseData.driver.fathersLastName);$('#mother-last-name-driver').val(data.responseData.driver.motherLastName);$('#mobile-phone').val(data.responseData.driver.mobile);$('#home-phone').val(data.responseData.driver.phoneHome);$('#office-phone').val(data.responseData.driver.phoneOffice);$('#email').val(data.responseData.driver.email);$('#addressLine1').val(data.responseData.driver.addressLine1);if(data.responseData.driver.gender){$('#gender-male').val(1).attr('checked','checked');}else{$('#gender-female').val(0).attr('checked','checked');}
$('#addressLine2').val(data.responseData.driver.addressLine2)
$('#idHomeContry').val(data.responseData.driver.idHomeContry);$('#idHomeEstate').val(data.responseData.driver.idHomeEstate);$('#idHomeCity').val(data.responseData.driver.idHomeCity);$('#idWorkContry').val(data.responseData.driver.idWorkContry);$('#idWorkState').val(data.responseData.driver.idWorkEstate);$('#idWorkCity').val(data.responseData.driver.idWorkCity);$('#driver-user-name').val(data.responseData.driver.username);$('#idDevice').val(data.responseData.driverDevice.idDevice);$('#deviceImei').val(data.responseData.driverDevice.imei);$('#deviceMark').val(data.responseData.driverDevice.idBrand);$('#deviceModel').val(data.responseData.driverDevice.idModel);$('#deviceSerial').val(data.responseData.driverDevice.serialDevice);$('#devicePhone').val(data.responseData.driverDevice.mobileDevice);$('#_method').val('PUT');$('#idDriver').val(data.responseData.driver.dIdDriver);$('#idDriver-taxi').val(data.responseData.driver.dIdDriver);$('#table-taxi-driver tbody').empty();$.each(data.responseData.taxies,function(key,item){$('#table-taxi-driver').append('<tr><td>'+item.vehiclePlate+'<\/td>'+'<td>'+item.brandName+'<\/td>'+'<td>'+item.modelName+'<\/td>'+'<td>'+item.colorName+'<\/td>'+'<td>'+item.year+'<\/td>'+'<td>'+item.typeCarName+'<\/td>'+'<td>'+item.taxiServiceName+'<\/td>'+'<td><a href="#" class="taxi-info glyphicon glyphicon-remove text-danger" style="text-decoration:none;" data-index='+item.idTaxi+' data-plate='+item.vehiclePlate+'><\/a><\/td><\/tr>');});$('#form-taxi-driver').parent().parent().show();$('#btn-driver-buy').show();$('#driverPassword').addClass("ignore");$('#repeatPassword').addClass("ignore");$('#idHomeEstate').change();$('#idWorkState').change();$('#balance').val(data.responseData.driver.amount);$('#driver-user-name').prop('disabled',true);$('#driverPassword').prop('disabled',true);$('#repeatPassword').prop('disabled',true);break;case 400:new PNotify({title:'No encontrado',text:'El numero de licencia no existe o no esta asignado',type:'notice',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});break;}},type:'GET'});validateDriver.resetForm();});$('#btn-query-username').on('click',function(e){e.preventDefault();e.stopPropagation();var data=$('#driver-user-name').val();var url="/driver/username/verify/";if(data===''||data===undefined){new PNotify({title:'Valor requerido',text:'El Nombre de Usuario es requerido',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});return false;}
url+=data;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var code=parseInt(data.errorCode);if(code===-1){new PNotify({title:'Username asignado',text:'El Username Ya esta asignado',type:'notice',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{new PNotify({title:'Username disponible',text:'El Username esta disponible',type:'notice',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}},type:'GET'});});$('#btn-query-device').on('click',function(e){e.preventDefault();e.stopPropagation();var data=$('#deviceImei').val();var url="/driver/IMEI/";if(data===''||data===undefined){new PNotify({title:'Valor requerido',text:'El numero de IMEI es requerido',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});return false;}
url+=data;$.ajax({url:url,data:{format:'json'},error:function(e){alert('Ha ocurrido un error...'+e);},dataType:'json',success:function(data){var code=parseInt(data.idDevice);if(code===-1){new PNotify({title:'No encontrado',text:'El numero de IMEI no existe o no esta asignado',type:'notice',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{$('#deviceImei').val(data.imei);$('#deviceMark').val(data.idBrand);$('#deviceModel').val(data.idModel);$('#deviceSerial').val(data.serial);$('#devicePhone').val(data.mobile);$('#idDevice').val(data.idDevice);}},type:'GET'});});$('#btn-query-taxi').on('click',function(e){e.preventDefault();e.stopPropagation();var data=$('#vehiclePlate').val();var url="/driver/taxi/info/plate/";if(data===''||data===undefined){new PNotify({title:'Valor requerido',text:'El numero de placa es requerido',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});return false;}
url+=data;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var code=parseInt(data.t_IdTaxi);if(code===-1){new PNotify({title:'No encontrado',text:'El numero de Placa no existe o no esta asignado',type:'notice',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});$('#idTaxiCorp').val(0);$('#idBrand').val(0);$('#idModel').val(0);$('#idColor').val(0);$('#year').val(0);$('#idCarType').val(0);$('#idTaxiService').val(0);$('#ownerFirstName').val('');$('#ownerMiddleName').val('');$('#ownerFathersLastName').val('');$('#ownerDirectionLine1').val('');$('#ownerDirectionLine2').val('');$('#ownerMotherLastName').val('');}else{$('#idTaxiCorp').val(data.tc_idTaxiCorp);$('#idBrand').val(data.t_idBrand);$('#idColor').val(data.t_idColor);$('#year').val(data.t_year);$('#idCarType').val(data.t_idTypeCar);$('#idTaxiService').val(data.ts_idTaxiService);$('#ownerFirstName').val(data.t_ownerFirstName);$('#ownerMiddleName').val(data.t_ownerMiddleName);$('#ownerFathersLastName').val(data.t_ownerFathersLastName);$('#ownerDirectionLine1').val(data.t_OwnerDirectionLine1);$('#ownerDirectionLine2').val(data.t_OwnerDirectionLine2);$('#ownerMotherLastName').val(data.t_ownerMotherLastName);$('#idModelList').val(data.t_idModel);$('#idBrand').change();}
$('#idTaxi').val(data.t_IdTaxi);$('#equalsValues').prop('checked',false);},type:'GET'});validateTaxi.resetForm();});$('#form-driver').on('submit',function(e){e.preventDefault();e.stopPropagation();var method=$('#_method').val();if(method==='PUT'){var status=true;if($("#status").val()==='0'){status=false;}
var gender=1;if($("#gender-female").is(":checked")){gender=0;}
var data={}
data["idDriver"]=$("#idDriver").val();data["driverLicense"]=$("#driverLicense").val();data["expirationDateLicense"]=$("#expirationDateLicense").val();data["status"]=status;data["photoUrl"]=$('#photoUrl').val();data["gender"]=gender;data["firstName"]=$("#first-name-driver").val();data["middleName"]=$("#middle-name-driver").val();data["fathersLastName"]=$("#father-last-name-driver").val();data["motherLastName"]=$("#mother-last-name-driver").val();data["mobile"]=$("#mobile-phone").val();data["phoneHome"]=$("#home-phone").val();data["phoneOffice"]=$("#office-phone").val();data["email"]=$("#email").val();data["addressLine1"]=$("#addressLine1").val();data["addressLine2"]=$("#addressLine2").val();data["idHomeEstate"]=$("#idHomeEstate").val();data["idHomeCityCatalog"]=$("#idHomeCityCatalog").val();data["idWorkState"]=$("#idWorkState").val();data["idWorkCityCatalog"]=$("#idWorkCityCatalog").val();data["username"]=$("#username").val();data["password"]=$("#password").val();data["repeatPassword"]=$("#repeatPassword").val();data["idDevice"]=$("#idDevice").val();data["deviceImei"]=$("#deviceImei").val();data["deviceMark"]=$("#deviceMark").val();data["deviceModel"]=$("#deviceModel").val();data["deviceSerial"]=$("#deviceSerial").val();data["devicePhone"]=$("#devicePhone").val();$('#driverPassword').addClass("ignore");$('#repeatPassword').addClass("ignore");if(validateDriver.form()){$.ajax({type:'PUT',contentType:"application/json",url:$('#form-driver').attr('action'),data:JSON.stringify(data),dataType:'json',success:function(response){var result=parseInt(response.responseCode);if(result===400){var strTitle='';var strText='';var strType='error';var errorCode=parseInt(response.errorCode);switch(errorCode){case 1000:strTitle='Valores requeridos';strText='Algunos valores son requeridos';break;case 2102:strTitle='Usuario asignado';strText='El Usuario Ya est&aacute; asignado';break;case 3702:strTitle='Email asignado';strText='El Email Ya est&aacute; asignado';break;case-3001:strTitle='Error de Fecha';strText='Fecha mal formateada';break;case-3003:strTitle='Contrase&ntilde;a incorrecta';strText='Repita su contrase&ntilde;a';break;case-3004:strTitle='Asignaci&oacute;n limite';strText='El dispositivo ya alcanzo el limite de asignaci&oacute;n';break;case 3701:strTitle='IMEI no actualizado';strText='No se pudo reasignar el nuevo dispositivo, el driver ya tiene uno asignado';break;case-3008:strTitle='Fecha de Expiraci&oacute;n';strText='La fecha de Expiraci&oacute;n no puede ser anterior a la fecha actual';break;default:strTitle='Error inesperado';strText='Ocurrio error ['+errorCode+'] en la actualizaci&oacute;n del Conductor';break;}
new PNotify({title:strTitle,text:strText,type:strType,hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{new PNotify({title:'Conductor Actualizado',text:'El Conductor fue actualizado con exito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}}});}else{new PNotify({title:'Valores requeridos',text:'Verifique que toda la informaci&oacute;n requerida en Datos del Conductor, Datos de Acceso, Datos del Dispositivo este completa',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}}else{$('#driverPassword').removeClass("ignore");$('#repeatPassword').removeClass("ignore");if(validateDriver.form()){$.ajax({type:'POST',url:$('#form-driver').attr('action'),data:$('#form-driver').serialize(),success:function(response){var result=parseInt(response.responseCode);if(result===400){var strTitle='';var strText='';var strType='error';var errorCode=parseInt(response.errorCode);switch(errorCode){case 1000:strTitle='Valores requeridos';strText='Algunos valores son requeridos';break;case 2102:strTitle='Usuario asignado';strText='El Usuario Ya est&aacute; asignado';break;case 3702:strTitle='Email asignado';strText='El Email Ya est&aacute; asignado';break;case-3001:strTitle='Error de Fecha';strText='Fecha mal formateada';break;case-3003:strTitle='Contrase&ntilde;a incorrecta';strText='Repita su contrase&ntilde;a';break;case-3004:strTitle='Asignaci&oacute;n limite';strText='El dispositivo ya alcanzo el limite de asignaci&oacute;n';break;case-3008:strTitle='Fecha de Expiraci&oacute;n';strText='La fecha de Expiraci&oacute;n no puede ser anterior a la fecha actual';break;default:strTitle='Error inesperado';strText='Ocurrio error ['+errorCode+'] en la creaci&oacute;n del Conductor';break;}
new PNotify({title:strTitle,text:strText,type:strType,hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{new PNotify({title:'Conductor Registrado',text:'El Conductor fue registrado con exito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});$('#_method').val('PUT');$('#idDriver').val(response.errorCode);$('#idDriver-taxi').val(response.errorCode);$('#table-taxi-driver tbody').empty();$('#form-taxi-driver').parent().parent().show();$('#btn-driver-buy').show();}}});}else{new PNotify({title:'Valores requeridos',text:'Verifique que toda la informaci&oacute;n requerida en Datos del Conductor, Datos de Acceso, Datos del Dispositivo este completa',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}}});$('#form-taxi-driver').on('submit',function(e){e.preventDefault();e.stopPropagation();if(validateTaxi.form()){$.ajax({type:'POST',url:$(this).attr('action'),data:$(this).serialize(),success:function(response){var result=parseInt(response.responseCode);if(result===400){var strTitle='';var strText='';var strType='error';var errorCode=parseInt(response.errorCode);switch(errorCode){case 1000:strTitle='Valores requeridos';strText='Algunos valores son requeridos';break;case-3002:strTitle='Asignaci&oacute;n m&aacute;xima';strText='El taxi Ya alcanzo el m&aacute;ximo permitido de asignaciones';break;case 1007:strTitle='Asignaci&oacute;n m&aacute;xima';strText='El Conductor Ya alcanzo el m&aacute;ximo permitido de asignaciones';break;case 2401:strTitle='Error Conductor';strText='El Conductor NO existe';break;case 2701:strTitle='Error Taxi';strText='El Taxi  NO existe';break;default:strTitle='Error inesperado';strText='Ocurrio error ['+errorCode+'] en la Asignaci&oacute;n del Conductor';break;}
new PNotify({title:strTitle,text:strText,type:strType,hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{if(response.responseData==='success-update'){new PNotify({title:'Taxi actualizado',text:'El Taxi asociado al Conductor se ha modificado con exito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}else{new PNotify({title:'Taxi Asignado',text:'El Taxi fue asignado al Conductor con exito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});}
var data=$('#driverLicense').val();var url="/driver/";url+=data;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var code=parseInt(data.responseCode);switch(code){case 200:$('#table-taxi-driver tbody').empty();$.each(data.responseData.taxies,function(key,item){$('#table-taxi-driver').append('<tr><td>'+item.vehiclePlate+'<\/td>'+'<td>'+item.brandName+'<\/td>'+'<td>'+item.modelName+'<\/td>'+'<td>'+item.colorName+'<\/td>'+'<td>'+item.year+'<\/td>'+'<td>'+item.typeCarName+'<\/td>'+'<td>'+item.taxiServiceName+'<\/td>'+'<td><a href="#" class="taxi-info glyphicon glyphicon-remove text-danger" style="text-decoration:none;" data-index='+item.idTaxi+' data-plate='+item.vehiclePlate+'><\/a><\/td><\/tr>');});$('#form-taxi-driver').parent().parent().show();break;case 400:new PNotify({title:'No encontrado',text:'El numero de licencia no existe o no esta asignado',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});break;}},type:'GET'});}}});}});});$('#btn-driver-cancel').on('click',function(e){e.preventDefault();$('.type-method').val('POST');$('#driver-user-name').prop('disabled',false);$('#driverPassword').prop('disabled',false);$('#repeatPassword').prop('disabled',false);clearTagHTML('form-driver');clearTagHTML('form-taxi-driver');$('#table-taxi-driver tbody').empty();$('#form-taxi-driver').parent().parent().hide();$('#btn-driver-buy').hide();validateDriver.resetForm();validateTaxi.resetForm();$('#driverPassword').removeClass("ignore");$('#repeatPassword').removeClass("ignore");$('#driver-photo').attr('src','resources/images/profile_pic.jpg');$('#photoUrl').val('resources/images/profile_pic.jpg');$('#idDriver').val(0);$('#idDevice').val(0);$('#idDriver-taxi').val(0);$('#idTaxi').val(0);$('#form-idTaxi').val(0);$('#form-idDriver').val(0);$('#idDevice').val(0);$('#gender-male').prop('checked',true).val(1).click();$('#gender-female').prop('checked',false).val(0);$('#equalsValues').prop('checked',false);$('#driverLicense').focus();});$('#btn-driver-buy').on('click',function(e){e.preventDefault();$('#modal-buy-package').modal({show:true});});$('#table-taxi-driver tbody').on('click','.taxi-info',function(e){e.preventDefault();e.stopPropagation();var data=$(this).data('index');var dataPlate=$(this).data('plate');$('#form-idTaxi').val(data);$('#form-idDriver').val($('#idDriver').val());$('#modal-taxi-vehiclePlate').html(dataPlate);$('#modal-set-taxi').modal({show:true});});$('#btn-delete-taxi').on('click',function(e){e.preventDefault();e.stopPropagation();var url="/driver/removeTaxi";$('.modal').modal('hide');var data={}
data["idTaxi"]=$("#form-idTaxi").val();data["idDriver"]=$("#form-idDriver").val();$.ajax({url:url,data:JSON.stringify(data),contentType:"application/json",dataType:'json',error:function(){alert('Ha ocurrido un error...');},success:function(data){new PNotify({title:'Taxi Eliminado',text:'El Taxi fue eliminado del Conductor con exito',type:'success',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});var data=$('#driverLicense').val();var url="/driver/";url+=data;$.ajax({url:url,data:{format:'json'},error:function(){alert('Ha ocurrido un error...');},dataType:'json',success:function(data){var code=parseInt(data.responseCode);switch(code){case 200:$('#table-taxi-driver tbody').empty();$.each(data.responseData.taxies,function(key,item){$('#table-taxi-driver').append('<tr><td>'+item.vehiclePlate+'<\/td>'+'<td>'+item.brandName+'<\/td>'+'<td>'+item.modelName+'<\/td>'+'<td>'+item.colorName+'<\/td>'+'<td>'+item.year+'<\/td>'+'<td>'+item.typeCarName+'<\/td>'+'<td>'+item.taxiServiceName+'<\/td>'+'<td><a href="#" class="taxi-info glyphicon glyphicon-remove text-danger" style="text-decoration:none;" data-index='+item.idTaxi+' data-plate='+item.vehiclePlate+'><\/a><\/td><\/tr>');});$('#form-taxi-driver').parent().parent().show();break;case 400:new PNotify({title:'No encontrado',text:'El numero de licencia no existe o no esta asignado',type:'error',hide:true,styling:'bootstrap3',icon:'ui-icon ui-icon-mail-closed'});break;}},type:'GET'});},type:'PUT'});});$('#btn-taxi-new').on('click',function(e){e.preventDefault();clearTagHTML('form-taxi-driver');$('#equalsValues').prop('checked',false);validateTaxi.resetForm();$('#vehiclePlate').focus();});})();